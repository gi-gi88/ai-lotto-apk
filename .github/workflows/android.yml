name: Build & Package AI Lotto

# main 브랜치에 푸시되거나, 수동으로 워크플로우를 실행할 수 있습니다
on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      # 1. 코드 체크아웃
      - name: Checkout repository
        uses: actions/checkout@v3

      # 2. Java 세팅 (Cordova/Gradle 빌드용)
      - name: Set up JDK 11
        uses: actions/setup-java@v3
        with:
          distribution: temurin
          java-version: 11

      # 3. Node.js (Cordova CLI 등 필요 시)
      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 16

      # 4. Gradle 빌드 (app-debug.apk 생성)
      - name: Build Debug APK
        run: |
          chmod +x gradlew
          ./gradlew assembleDebug

      # 5. 빌드 결과물 업로드
      - name: Upload APK
        uses: actions/upload-artifact@v2
        with:
          name: app-debug.apk
          path: app/build/outputs/apk/debug/app-debug.apk

      - name: Upload 추천결과 PDF
        uses: actions/upload-artifact@v2
        with:
          name: 추천결과.pdf
          path: 추천결과.pdf

      - name: Upload QR_설치 이미지
        uses: actions/upload-artifact@v2
        with:
          name: QR_설치.png
          path: QR_설치.png

      - name: Upload 설치안내서 TXT
        uses: actions/upload-artifact@v2
        with:
          name: 설치안내서.txt
          path: 설치안내서.txt

      - name: Upload 북마크통계 CSV
        uses: actions/upload-artifact@v2
        with:
          name: 북마크통계.csv
          path: 북마크통계.csv
